<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Loan EMI & Amortization Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-emerald-50 min-h-screen flex items-center justify-center p-4">
  <div class="w-full max-w-6xl bg-white shadow-2xl rounded-2xl overflow-hidden">
    <header class="bg-emerald-600 text-white p-6">
      <h1 class="text-4xl font-extrabold">Loan EMI & Amortization Calculator</h1>
      <p class="mt-2 text-emerald-200">Enter your loan details and compare repayment plans.</p>
    </header>
    <main class="p-8 grid grid-cols-1 lg:grid-cols-4 gap-8">
      <!-- Form -->
      <section class="lg:col-span-1 space-y-6">
        <div>
          <label for="principal" class="block text-sm font-medium text-gray-700">Loan Amount (₹)</label>
          <input id="principal" type="number" value="1000000" class="mt-2 block w-full rounded-lg border border-gray-300 shadow-sm focus:ring-emerald-500 focus:border-emerald-500 p-3" />
        </div>
        <div>
          <label for="rate" class="block text-sm font-medium text-gray-700">Annual Interest Rate (%)</label>
          <input id="rate" type="number" step="0.01" value="15" class="mt-2 block w-full rounded-lg border border-gray-300 shadow-sm focus:ring-emerald-500 focus:border-emerald-500 p-3" />
        </div>
        <div>
          <label for="emis" class="block text-sm font-medium text-gray-700">Monthly EMIs (₹, space or comma separated)</label>
          <input id="emis" type="text" value="1000, 2000, 5000, 7500, 10000" class="mt-2 block w-full rounded-lg border border-gray-300 shadow-sm focus:ring-emerald-500 focus:border-emerald-500 p-3" />
        </div>
        <p id="minEmiNote" class="text-sm font-medium text-yellow-600"></p>
        <button id="calculateBtn" class="w-full bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-3 rounded-lg shadow">Calculate</button>
      </section>
      <!-- Results -->
      <section class="lg:col-span-3">
        <div class="border-b border-gray-200">
          <nav class="flex -mb-px" id="tabs">
            <button data-tab="table" class="tab-btn py-4 px-6 text-lg font-semibold text-emerald-600 border-b-2 border-emerald-600">Table</button>
            <button data-tab="chart" class="tab-btn py-4 px-6 text-lg font-semibold text-gray-500 hover:text-emerald-600 border-b-2 border-transparent">Chart</button>
          </nav>
        </div>
        <div id="tab-content" class="pt-6">
          <!-- Table -->
          <div id="table" class="tab-panel">
            <div class="overflow-x-auto">
              <table class="min-w-full bg-white rounded-lg shadow-lg">
                <thead class="bg-emerald-100">
                  <tr>
                    <th class="px-6 py-3 text-left text-sm font-bold text-gray-700">EMI (₹)</th>
                    <th class="px-6 py-3 text-left text-sm font-bold text-gray-700">Months</th>
                    <th class="px-6 py-3 text-left text-sm font-bold text-gray-700">Years</th>
                  </tr>
                </thead>
                <tbody id="results" class="divide-y divide-gray-200"></tbody>
              </table>
            </div>
          </div>
          <!-- Chart -->
          <div id="chart" class="tab-panel hidden">
            <div class="bg-white p-6 rounded-lg shadow-lg">
              <canvas id="emiChart"></canvas>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>  <script>
    // Tab switch
    const tabs = document.querySelectorAll('.tab-btn');
    const panels = document.querySelectorAll('.tab-panel');
    tabs.forEach(btn => btn.addEventListener('click', () => {
      tabs.forEach(b => {
        b.classList.remove('border-emerald-600','text-emerald-600');
        b.classList.add('border-transparent','text-gray-500');
      });
      btn.classList.add('border-emerald-600','text-emerald-600');
      btn.classList.remove('border-transparent','text-gray-500');
      panels.forEach(p => p.classList.add('hidden'));
      document.getElementById(btn.dataset.tab).classList.remove('hidden');
    }));

    function calculateMonths(P, annualR, emi) {
      const r = annualR/12/100;
      if (emi <= P*r) return Infinity;
      const n = Math.log(emi/(emi - P*r)) / Math.log(1 + r);
      return Math.ceil(n);
    }

    let chartInstance;
    document.getElementById('calculateBtn').addEventListener('click', () => {
      const P = parseFloat(document.getElementById('principal').value);
      const annualR = parseFloat(document.getElementById('rate').value);
      const minEmi = Math.ceil(P * (annualR/12/100));
      document.getElementById('minEmiNote').textContent = `Minimum EMI to start reducing principal: ₹${minEmi.toLocaleString()}`;

      const emiList = document.getElementById('emis').value.split(/[,\s]+/).map(e=>parseFloat(e)).filter(e=>!isNaN(e));
      const tbody = document.getElementById('results'); tbody.innerHTML = '';
      const labels = [], data = [];
      emiList.forEach(emi=>{
        const months = calculateMonths(P, annualR, emi);
        const years = months===Infinity?'∞':(months/12).toFixed(2);
        const mDisp = months===Infinity?'∞':months;
        const row = `<tr class="hover:bg-emerald-50"><td class="px-6 py-4 text-gray-700">₹${emi.toLocaleString()}</td><td class="px-6 py-4 text-gray-700">${mDisp}</td><td class="px-6 py-4 text-gray-700">${years}</td></tr>`;
        tbody.insertAdjacentHTML('beforeend', row);
        labels.push(`₹${emi.toLocaleString()}`);
        data.push(months===Infinity?null:months);
      });

      const ctx = document.getElementById('emiChart').getContext('2d');
      if (chartInstance) chartInstance.destroy();
      chartInstance = new Chart(ctx, {
        type:'line', data:{ labels, datasets:[{ label:'Months to Repay', data, fill:false, tension:0.3, borderColor:'rgba(16,185,129,0.8)', pointBackgroundColor:'rgba(16,185,129,1)' }] },
        options:{ responsive:true, scales:{ y:{ beginAtZero:true, title:{ display:true, text:'Months' } } } }
      });
    });

    // Default view
    tabs[0].click();
  </script></body>
</html>